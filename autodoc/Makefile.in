###############################################################################
# draco/autodoc Makefile.in
# Thomas M. Evans
# Wed Sep  1 16:14:07 1999
# $Id$
###############################################################################
# @> General Makefile.in for draco/autodoc
###############################################################################

# doxygen executable
DOXYGEN = @DOXYGEN_PATH@

INSTALL = @INSTALL@

prefix = @prefix@
srcdir = @srcdir@
doxygen_extras = @doxygen_extras@
installdirs = ${prefix}/html ${prefix}/latex

##---------------------------------------------------------------------------##

.PHONY : html latex install autodoc configure reconfigure

autodoc: html

html latex:
	@if test ${DOXYGEN} = 'null'; then \
		echo Doxygen not available; \
	else \
		${DOXYGEN} doxygen_config; \
		cp ${srcdir}/html/draco.gif ${prefix}/html; \
                cp ${srcdir}/html/doxygen.png ${prefix}/html; \
	        cp ${srcdir}/html/draco.css ${prefix}/html; \
		for dir in ${doxygen_extras}; \
		do \
			files=`ls $${dir}` ; \
			dir_name=`dirname $${dir}` ; \
			base_name=`basename $${dir_name}` ; \
			mkdir -p ${prefix}/html/$${base_name}; \
			for file in $${files} ; \
			do \
				cp -f $${dir}/$${file} \
				  ${prefix}/html/$${base_name}/; \
			done \
		done \
	fi

install:
 
check:

##---------------------------------------------------------------------------##
## Build system targets and rules

configure:
	@echo "Rebuilding ${srcdir}/aclocal.m4"
	@cd ${srcdir} && aclocal -I ../config
	@echo "Rebuilding ${srcdir}/configure"
	@cd ${srcdir} && autoconf
	@./config.status --recheck
	@./config.status

reconfigure: 
	@./config.status --recheck
	@./config.status

##---------------------------------------------------------------------------##
## clean targets

clean: forced-clean

forced-clean:
	-rm -rf ${prefix}/html/*
	-rm -rf ${prefix}/latex/*

mostlyclean: clean

distclean: mostlyclean forced-distclean

forced-distclean:
	-rm -f config.status config.cache config.log
	-rm -f header.html footer.html doxygen_config
	-rm -f Makefile

###############################################################################
#			 end of draco/autodoc Makefile.in
###############################################################################
