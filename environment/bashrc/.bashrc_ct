##-*- Mode: sh -*-
##---------------------------------------------------------------------------##
## .bashrc_ccs4_linux - my bash configuration file upon bash login
##---------------------------------------------------------------------------##

if test -n "$verbose"; then
   echo "In .bashrc_ct"
fi

##---------------------------------------------------------------------------##
## ENVIRONMENTS
##---------------------------------------------------------------------------##

# unlimit stack and core dump sizes.
ulimit -s unlimited

# Where is draco
#_BINDIR=`dirname "$BASH_ARGV"`
#export DRACO_MODULE_DIR=`(cd $_BINDIR/../Modules;pwd)`

# Where is the vendor directory
if test "${VENDOR_DIR}x" == "x"; then
   if test -d /usr/projects/draco/vendors; then
      VENDOR_DIR=/usr/projects/draco/vendors
   fi
fi

#
# MODULES
#
# Use this module command when running bash.
# function module() { eval `/usr/bin/modulecmd bash $*`; }
# source /opt/modules/3.2.6.7/init/bash

# Use modules found in the draco directory
module use $VENDOR_DIR/Modules/hpc
module use $VENDOR_DIR/Modules/ct-fe

# Move some environment out of the way.
module unload PrgEnv-intel PrgEnv-pgi
module unload cmake numdiff svn gsl
module unload papi perftools trilinos
# load the Intel programming env, but then unloda libsci and totalview
module load PrgEnv-intel
module unload xt-libsci xt-totalview

# draco modules start here.
module load gsl lapack/3.4.1
module load cmake numdiff svn emacs
module load trilinos SuperLU_DIST 
module load ParMetis ndi random123 eospac

export OMP_NUM_THREADS=8

# Avoid run time messages of the form:
# "OMP: Warning #72: KMP_AFFINITY: affinity only supported for Intel(R) processors."
# Ref: http://software.intel.com/en-us/articles/bogus-openmp-kmp_affinity-warnings-on-non-intel-processor-hosts/
export KMP_AFFINITY=none

##---------------------------------------------------------------------------##
## end of .bashrc_ct
##---------------------------------------------------------------------------##
