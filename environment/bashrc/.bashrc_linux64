##-*- Mode: sh -*-
##---------------------------------------------------------------------------##
## .bashrc_ccs4_linux - my bash configuration file upon bash login
##---------------------------------------------------------------------------##

if test -n "$verbose"; then
   echo "In .bashrc_linux64"
fi

##---------------------------------------------------------------------------##
## ENVIRONMENTS
##---------------------------------------------------------------------------##

# unlimit stack and core dump sizes.
ulimit -s unlimited

# Locate the vendor directory
if test "${VENDOR_DIR}x" == "x"; then
   export VENDOR_DIR=/ccs/codes/radtran/vendors
   if test -d /var/tmp/vendors; then
      export VENDOR_DIR=/var/tmp/vendors
   fi
fi

target="`uname -n | sed -e s/[.].*//`"
arch=`uname -m`

case ${target} in
# gondolin*)
#    if test -z "$MODULESHOME"; then
#      if test -f ${VENDOR_DIR}/modules-3.2.9/init/bash; then
#        source ${VENDOR_DIR}/modules-3.2.9/init/bash
#      fi
#    fi
#    module load Modules.deprecated
#    module load gcc/4.7.1 gsl/1.13
#    module load emacs/23.2
#    module load openmpi totalview 
#    module load cmake grace lapack random123 eospac numdiff git svn
#    module load dia graphviz doxygen git valgrind
#    module load BLACS SCALAPACK SuperLU_DIST hypre ndi
#    module load ParMetis trilinos  
# ;;

*)
   # Is the module function available?
   found=`declare -f module | wc -l`
   # Module is provided by the system:
   if test ${found} == 0; then
     if test -f /usr/share/Modules/init/bash; then
        source /usr/share/Modules/init/bash
     elif test -f /ccs/opt/x86_64/modules/Modules/3.2.10/init/bash; then
        # CCS workstations (e.g.: gondolin)
        source /ccs/opt/x86_64/modules/Modules/3.2.10/init/bash
     fi
   fi
   module use /ccs/codes/radtran/vendors/Modules
   module load gcc/4.8.1
   module load gsl/1.16
   module load emacs/24.2
   module load openmpi totalview 
   module load cmake grace lapack random123 eospac numdiff git svn
   module load dia graphviz doxygen git valgrind
   module load BLACS SCALAPACK SuperLU_DIST hypre ndi
   module load ParMetis trilinos  
;;
esac

#LaTeX
extradirs=". ${DRACO_SRC_DIR}/environment/latex"
for mydir in ${extradirs}; do
  if test -z "`echo $TEXINPUTS | grep $mydir`" && test -d $mydir; then
    export TEXINPUTS=$mydir:$TEXINPUTS
  fi
done
extradirs=". ${DRACO_SRC_DIR}/environment/bibtex"
for mydir in ${extradirs}; do
  if test -z "`echo $BSTINPUTS | grep $mydir`" && test -d $mydir; then
    export BSTINPUTS=$mydir:$BSTINPUTS
  fi
done
extradirs=". ${DRACO_SRC_DIR}/environment/bibfiles"
for mydir in ${extradirs}; do
  if test -z "`echo $BIBINPUTS | grep $mydir`" && test -d $mydir; then
    export BIBINPUTS=$mydir:$BIBINPUTS
  fi
done
unset extradirs

##---------------------------------------------------------------------------##
## end of .bashrc_linux64
##---------------------------------------------------------------------------##
