# Where are we?
DRACO_MODULE_DIR=`(pwd)`

# What is the platform?

if test -d /ccs/codes/radtran; then  
  if test `uname -m` = "x86_64"; then 
    platform=ccslan64
  else
    platform=ccslan32
  fi
fi

#target="`uname -n | sed -e s/[.].*//`"
if [ "${MODULE_VERSION:-}" = "" ]; then
   case $platform in
   ccslan32 ) 
      MODULE_VERSION_STACK="ccs-Linux32"
      MODULE_VERSION="ccs-Linux32"
      ;;

   ccslan64)
      MODULE_VERSION_STACK="ccs-Linux64"
      MODULE_VERSION="ccs-Linux64"
      ;;
   esac
   export MODULE_VERSION

else
  MODULE_VERSION_STACK="$MODULE_VERSION"
fi
export MODULE_VERSION_STACK
export MODULESHOME=$DRACO_MODULE_DIR

# Define the module command
module() { eval `$MODULESHOME/bin/modulecmd zsh $*`; }
export module

if [ "${LOADEDMODULES:-}" = "" ]; then
  LOADEDMODULES=
  export LOADEDMODULES
fi

if [ "${MODULEPATH:-}" = "" ]; then
  export MODULEPATH=./$MODULESHOME/modulefiles:$MODULESHOME/$MODULE_VERSION
fi

if [ ${ZSH_VERSINFO:-0} -ge 3 ] && [ -r ${MODULESHOME}/init/zsh_completion ]; then
  source ${MODULESHOME}/init/zsh_completion
fi
