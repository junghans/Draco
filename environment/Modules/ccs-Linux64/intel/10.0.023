#%Module1.0#####################################################################
##
## modules modulefile
##
## modulefiles/modules.  Generated from modules.in by configure.
##

# global control file
if { [file exists $env(MODULESHOME)/etc/control] } {
   source $env(MODULESHOME)/etc/control;
}

conflict gcc
conflict pgi
conflict lapack-gcc
conflict lapack-pgi

# local variables
set version     10.0.023;
set arch        x86_64;

set prefix      /ccs/opt/$arch/intel/cce/$version;
set bindir      $prefix/bin;
set libdir      $prefix/lib;
set mandir      $prefix/man;
#set licdir      $prefix/licenses;
set licdir      /ccs/opt/$arch/intel/cc/$version/licenses; 

set f90prefix   /ccs/opt/$arch/intel/fce/$version;
set f90bindir   $f90prefix/bin;
set f90libdir   $f90prefix/lib;
set f90mandir   $f90prefix/man;

# module whatis
module-whatis   "Intel C++ $version";

# module help
proc ModulesHelp { } {
   global version prefix bindir;

   puts stderr "\t Intel C/C++/F90 $version\n";
   puts stderr "\tMakefile variables:";
   puts stderr "\t\tCC\t= $bindir/icc";
   puts stderr "\t\tCXX\t= $bindir/icpc";
   puts stderr "\t\tFC\t= $f90bindir/ifort";
   puts stderr "\t\tF77\t= $f90bindir/ifort";
   puts stderr "\t\tF90\t= $f90bindir/ifort";
   puts stderr "\t\tF95\t= $f90bindir/ifort";
   puts stderr "\t\tINTEL_LICENSE_FILE\t= $licdir/license.dat";
}

if { ![file exists $prefix] } {
   puts stderr "\n[module-info name]: $prefix: No such file or directory.\n";
   break;
   exit 1;
}

setenv          CC              $bindir/icc;
setenv          CXX             $bindir/icpc;
setenv          F77             $f90bindir/ifort;
setenv          F90             $f90bindir/ifort;
setenv          FC              $f90bindir/ifort;
setenv          F95             $f90bindir/ifort;
setenv          INTEL_LICENSE_FILE $licdir/license.dat;

# Converting clients to embedded info in module files, rather
# than supporting client license files in the installation directory(s). 
prepend-path    LD_LIBRARY_PATH $libdir;
prepend-path    LD_LIBRARY_PATH $f90libdir;
prepend-path    PATH            $bindir;
prepend-path    PATH            $f90bindir;

catch {set cur_manpath $env(MANPATH)};
if { ![info exists cur_manpath] || ($cur_manpath == "") } {
   setenv MANPATH :;
}

prepend-path    MANPATH         $mandir;
prepend-path    MANPATH         $f90mandir;

