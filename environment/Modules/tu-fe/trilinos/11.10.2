#%Module1.0#####################################################################
##
## modules modulefile
##
## modulefiles/modules.  Generated from modules.in by configure.
##

# module whatis
set version 11.10.2
module-whatis   "Trilinos $version";

conflict trilinos

# What MPI

if { [info exists ::env(LMPI) ] } {
   # this is the flavor
   set mpiflavor $::env(LMPI)
} else {
   set mpiflavor openmpi
}

if { [info exists ::env(MPI_ROOT) ] } {
   # this is the path the mpi installation.
   set mpi $::env(MPI_ROOT)
   set mpiver [ lindex [ split "$mpi" "/" ] end ]
} else {
  set mpiver notset
}

# local variables
set prefix      /usr/projects/draco/vendors/trilinos-$version/tlcc-${mpiflavor}-${mpiver}
set incdir      $prefix/include;
set libdir      $prefix/lib

# module help
proc ModulesHelp { } {
   global version prefix bindir;

   puts stderr "\tTrilinos $version\n";
   puts stderr "\tTRILINOS_INC_DIR\t= $incdir";
   puts stderr "\tTRILINOS_LIB_DIR\t= $libdir";
}

if { ![file exists $prefix] } {
   puts stderr "\n[module-info name]: $prefix: No such file or directory.\n";
   break;
   exit 1;
}

# Converting clients to embedded info in module files, rather
# than supporting client license files in the installation directory(s). 
# prepend-path    PATH            $bindir;

setenv TRILINOS_INC_DIR $incdir
setenv TRILINOS_LIB_DIR $libdir
