#%Module1.0#####################################################################
##
## modules modulefile
##
## modulefiles/modules.  Generated from modules.in by configure.
##

conflict lapack

# global control file
if { [file exists $env(MODULESHOME)/etc/control] } {
   source $env(MODULESHOME)/etc/control;
}

if { [ info exists ::env(LCOMPILER) ] } {
   set compiler $::env(LCOMPILER)
   set compilerver $::env(LCOMPILERVER)
} else {
  set compiler    gcc
  set compilerver 4.7.1
  puts stderr "*** No LCOMPILER  ***"
  puts stderr "*** Using GNU build of LAPACK ***"
}

# local variables
set version     3.4.0;
set prefix      /projects/opt/draco/vendors/lapack-$version/${compiler}-${compilerver}
set libdir      $prefix/lib;
set incdir      $prefix/include;

# module whatis
module-whatis   "loads the LAPACK-$version environment";

# module help
proc ModulesHelp { } {
   global version prefix bindir;

   puts stderr "\tLAPACK ($version)\n";
   puts stderr "\tLAPACK_LIB_DIR\t= $libdir";
#   puts stderr "\tLAPACK_INC_DIR\t= $incdir";
#   puts stderr "\tLAPACK_ROOT\t= $prefix";
#   puts stderr "\t\$LAPACK_LS_FLAGS, \$LAPACK_COMPILE_FLAGS";
}

if { ![file exists $prefix] } {
   puts stderr "\n[module-info name]: $prefix: No such file or directory.\n";
   break;
   exit 1;
}

#setenv          LAPACK_ROOT 	$prefix;
#setenv          LAPACK_LD_FLAGS  "-L/usr/lib64 -lgfortran -L$libdir -llapack -lcblas -lf77blas -latlas";
#setenv          LAPACK_COMPILE_FLAGS 	-I$prefix/include;

setenv          LAPACK_LIB_DIR  $libdir
#setenv          LAPACK_INC_DIR  $incdir
setenv          BLAS_blas_LIBRARY ${libdir}/libblas.a

