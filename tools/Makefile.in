###############################################################################
# draco/tools Makefile.in
# Thomas M. Evans
# Wed Feb  3 16:36:55 1999
# $Id$
###############################################################################
# @> General Makefile.in for tools
###############################################################################

# @configure_input@

top_srcdir = @top_srcdir@
srcdir = @srcdir@
VPATH = @srcdir@  # : this colon is a bug work around.

config_dir = $(shell cd ${srcdir}/../config; pwd)

# The subdirectories to recurs into (if they exist).

subdirs = @subdirs@

INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

package = @package@
prefix = @prefix@
exec_prefix = @exec_prefix@
includedir = @includedir@
libdir = @libdir@
libexecdir = @libexecdir@
bindir = @bindir@

installfiles = @installfiles@
installdirs = @installdirs@

# If the make flags include a -k then do not exit on errors.

ifneq (,$(findstring k,${MAKEFLAGS}))
  EXIT = :
else
  EXIT = exit
endif

##---------------------------------------------------------------------------##
## RULES AND TARGETS
##---------------------------------------------------------------------------##

.PHONY : all run install installdirs clean distclean mostlyclean maintainer-clean \
	check uninstall forced-distclean forced-maintainer-clean \
	dvi configure reconfigure

run:

all: install

install: installdirs ${installfiles}

installdirs: ${installdirs}

${installdirs}:
	${INSTALL} -d $@

uninstall:
	-rm ${installfiles}

${libdir}/%: %
	${INSTALL_DATA} $< $@

${bindir}/%: %
	${INSTALL} $< $@

${libexecdir}/%: %
	${INSTALL} $< $@

${includedir}/${package}/%: %
	${INSTALL_DATA} $< $@

${includedir}/${package}/config.h: config.h
	${INSTALL_DATA} $< $@

##---------------------------------------------------------------------------##
## Build system targets and rules

## configuration files: Makefile depends on all of the M4 files in the
## config directory and the pkg_config directory
configfiles := $(wildcard ${top_srcdir}/${rel_config_dir}/*.m4) \
	$(wildcard ${top_srcdir}/${rel_config_dir}/../pkg_config/*.m4)

configure:
	@echo "Rebuilding ${top_srcdir}/aclocal.m4"
	@cd ${top_srcdir} && aclocal -I ../config
	@echo "Rebuilding ${top_srcdir}/configure"
	@cd ${top_srcdir} && autoconf
	@./config.status --recheck
	@./config.status

reconfigure: 
	@./config.status --recheck
	@./config.status

##---------------------------------------------------------------------------##
## Clean rules

clean:
	-rm -f ${installfiles}

distclean: forced-distclean
forced-distclean:
	-rm config.status config.cache config.log config.h stamp-h Makefile

maintainer-clean: forced-maintainer-clean distclean
forced-maintainer-clean:
	@echo 'This command is intended for maintainers to use; it'
	@echo 'deletes files that may need special tools to rebuild.'

###############################################################################
#			 end of draco/tools Makefile.in
###############################################################################
