###############################################################################
# draco/autodoc Makefile.in
# Thomas M. Evans
# Wed Sep  1 16:14:07 1999
# $Id$
###############################################################################
# @> General Makefile.in for draco/autodoc
###############################################################################

# Automatic autoconf variables:
top_srcdir = @top_srcdir@
srcdir = @srcdir@

# doxygen executable
DOXYGEN = @DOXYGEN_PATH@

#installation executable
INSTALL = @INSTALL@

# package name
package = @package@

# directory for doxygen output
doxygen_output = @doxygen_output@

# get the relative directory to the autoconf files from ${top_srcdir}.
rel_autoconf_dir := $(shell ( cd ${top_srcdir} ; \
	tmp="" ; \
	while test ! -d autodoc ; \
	do \
	   cd .. ; \
	   tmp=$$tmp../ ; \
	done ; \
	echo $$tmp ) )autodoc

# get the absolute path of the autoconf dir
top_autoconf_dir = $(shell cd ${top_srcdir}/${rel_config_dir}; pwd)

# Build lists of image files and support files in the top autodoc
# directory and the local autodoc directory. The local directory files
# are listed last to override earlier entries in the autodoc dir

imagefiles=$(wildcard ${top_autodoc_dir}/html/*.png)\
	$(wildcard ${top_autodoc_dir}/html/*.gif)\
	$(wildcard ${top_autodoc_dir}/html/*.jpg)\
	$(wildcard ${srcdir}/autodoc/*.png)\
	$(wildcard ${srcdir}/autodoc/*.gif)\
	$(wildcard ${srcdir}/autodoc/*.jpg)

supportfiles=$(wildcard ${top_autodoc_dir}/html/*.css)\
	$(wildcard ${top_autodoc_dir}/html/*.html)\
	$(wildcard ${srcdir}/autodoc/*.css)\
	$(wildcard ${srcdir}/autodoc/*.html)

tagfiles = @TAGFILES@

##---------------------------------------------------------------------------##

# .SUFFIXES : .png .gif .jpg .css .html
.PHONY : html latex install autodoc configure reconfigure \
	install_support install_images tagfile_target

autodoc: html

html latex: install_images install_support ${tagfiles}
	@if test ${DOXYGEN} = 'null'; then \
	   echo Doxygen not available; \
	else \
	   ${DOXYGEN} doxygen_config; \
	fi

install:

check:

##---------------------------------------------------------------------------##
## Install support files

install_images: ${imagefiles} 
	@for file in ${imagefiles}; do \
	   echo "Install $${file} to ${doxygen_output}";\
	   ${INSTALL} $${file} ${doxygen_output}/; \
	done

install_support: ${supportfiles} 
	@for file in ${supportfiles}; do \
	   echo "Install $${file} to ${doxygen_output}";\
	   ${INSTALL} $${file} ${doxygen_output}/; \
	done


##---------------------------------------------------------------------------##
## Build system targets and rules

configure:
	@echo "Rebuilding ${srcdir}/aclocal.m4"
	@cd ${srcdir} && aclocal -I ../config
	@echo "Rebuilding ${srcdir}/configure"
	@cd ${srcdir} && autoconf
	@./config.status --recheck
	@./config.status

reconfigure: 
	@./config.status --recheck
	@./config.status

##---------------------------------------------------------------------------##
## clean targets

clean: forced-clean

forced-clean:
	-rm -rf ${doxygen_output}/*
#	-rm -rf ${prefix}/latex/*

mostlyclean: clean

distclean: mostlyclean forced-distclean

forced-distclean:
	-rm -f config.status config.cache config.log
	-rm -f header.html footer.html doxygen_config
	-rm -f Makefile

###############################################################################
#			 end of draco/autodoc Makefile.in
###############################################################################
