###############################################################################
## tstPlot2D_Diff.py
## Rob Lowrie
## $Id$
###############################################################################

##---------------------------------------------------------------------------##
#  Checks standard tstPlot2D output.
##---------------------------------------------------------------------------##

import string, re, sys

sys.path.append('@prefix@/bin') # for numdiff

import numdiff

# ignore lines that start with these regex
skip = ['^@.*']
#skip = ['^@version.*', '^@timestamp.*', '^@default.sformat.*']

# Files generated by test code
files = ['plot1.agr',
         'plot2.agr',
         'plot3.agr',
         'plot4.agr']

# Prefix to add to compare files to
benchPrefix = 'bench_'

# Create the numdiff object
n = numdiff.Numdiff(verbosity=2)

for s in skip:
  n.skip.append(re.compile(s))

# Compare all the files

for f in files:
    benchFile = benchPrefix + f
    d = n.diff(f, benchFile)
    print 'tstPlot2D_Diff file %s test:' % f,
    if d[0]:
      print 'fail'
    else:
      print 'pass'


###############################################################################
##                            end of tstPlot2D_Diff.py
###############################################################################

