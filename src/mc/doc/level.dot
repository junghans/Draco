digraph mc_package_level {
    /* graph attributes */
    center=1;
    size="8,14";
    ranksep=1.25;
    
    /* levels */
    level1 [shape=plaintext, label="Level 1:", fontsize=18];
    level2 [shape=plaintext, label="Level 2:", fontsize=18];
    level3 [shape=plaintext, label="Level 3:", fontsize=18];
    level4 [shape=plaintext, label="Level 4:", fontsize=18];
    level5 [shape=plaintext, label="Level 5:", fontsize=18];
    
    level5 -> level4 -> level3 -> level2 -> level1 [style=invis];   

    /* mc components */
	
    /* level 1 */
    amr_layout    [shape=box, label="AMR_Layout"];
    comm_patterns [shape=box, label="Comm_Patterns"];
    constants     [width=2,   shape=box, label="Constants"];
    coord_sys     [shape=box, label="Coord_sys"];
    gen_top       [shape=box, label="General_Topology"];
    interface     [shape=box, label="Interface"];
    layout        [shape=box, label="Layout"];
    math          [width=2,   shape=box, label="Math"];
    os_builder    [shape=box, label="OS_Builder"];
    os_mesh       [shape=box, label="OS_Mesh"];
    p_data_op     [shape=box, label="Parallel_Data_Operator"];
    topology      [shape=box, label="Topology"];
    rzwedge_build [shape=box, label="RZWedge_Builder"];
    rzwedge_mesh  [shape=box, label="RZWedge_Mesh"];
    rep_top       [shape=box, label="Rep_Topology"];
    sampler       [shape=box, label="Sampler"];
    tet_builder   [shape=box, label="TET_Builder"];
    tet_mesh      [shape=box, label="TET_Mesh"];
    threevec      [shape=box, label="ThreeVector"];
    xycoord       [shape=box, label="XYCoord_sys"];
    xyzcoord      [shape=box, label="XYZCoord_sys"];
    
    /* Levelization diagram */

    comm_patterns -> {topology};
    gen_top -> {topology};
    rep_top -> {topology};
    coord_sys -> {constants math};
    
    xycoord -> {coord_sys};
    xyzcoord -> {coord_sys};
    os_mesh -> {constants coord_sys layout};
    p_data_op -> {math topology comm_patterns};
    rzwedge_mesh -> {constants coord_sys amr_layout math sampler};
    
    tet_mesh -> {constants threevec xyzcoord layout};
    os_builder -> {xycoord xyzcoord layout os_mesh};
    rzwedge_build -> {xycoord xyzcoord math amr_layout rzwedge_mesh};
    
    tet_builder -> {xyzcoord tet_mesh};
    
    /* dependencies */
    {rank=same; level1 amr_layout constants interface layout math topology
		    sampler threevec};
    {rank=same; level2 comm_patterns gen_top rep_top coord_sys};
    {rank=same; level3 xycoord xyzcoord os_mesh p_data_op rzwedge_mesh};
    {rank=same; level4 tet_mesh os_builder rzwedge_build};
    {rank=same; level5 tet_builder};
}
