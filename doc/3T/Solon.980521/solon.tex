%\documentclass{slides}
\documentclass{myslidehead}
%\usepackage[dvips,draft]{graphics}
\usepackage[dvips,final]{graphics}
\usepackage[dvips]{color}

%\usepackage[xdvi]{color}
\usepackage{amsmath}

\input{solonpreamble.tex}

\newcommand{\comment}[1]{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \onlynotes{0}
% \onlyslides{1-9999}

\begin{document}

\pagestyle{headings}
%\pagestyle{plain}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    Solon Discussion and Integration Issues

    Randy M. Roberts \\
    May 21, 1998
  \end{center}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large Solon Discussion and Integration Issues
  \end{center}

  \begin{itemize}
    \item Discuss the P1 Approximation to the 3T Equations.
    \item Discuss the P13T Class
    \item Discuss the Interpolated Material Properties Class
  \end{itemize}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The 3T Equations
  \end{center}

  The Ion Temperature Equation:
  \[
    C_{vi} \partl{T_{i}}{t} = \splitcolor{\del \cdot \kappa_{i} \del T_{i}}
    + \gamma (T_{e}-T_{i}) + Q_{i}
  \]

  The Electron Temperature Equation:
  \[
    \begin{split}
        C_{ve} \partl{T_{e}}{t} = 
                \splitcolor{\del \cdot \kappa_{e} \del T_{e}} & +
                     \left(
                        \sigma^{a} \phi - \futurecolor{\tilde{\xi}}
                        - \sigma^{e} \B(T_{e}) \right) \\
                        & + \gamma (T_{i} - T_{e}) + Q_{e}
    \end{split}
  \]

  The One-Group Radiation Transport Equation:
  \[
    \begin{split}
        \frac{1}{c} \partl{\psi}{t}
        + \hat{\Omega} \cdot \del \psi
        + \sigma^{t} \psi
        = \frac{1}{4 \pi}
         \left( \rule{0mm}{.8em} \right. & \sigma^{s} \phi 
                + \futurecolor{\xi} \\
                & \left. \mbox{} + \sigma^{e} \B(T_{e})
                + Q_{r}
         \right)
    \end{split}
  \]

\end{slide}

%-----------------------------------------------------------------------

\begin{note}
  \[
        \sigma^{t} = \sigma^{a} + \sigma^{s}
  \]
  \[
        \B(T) \equiv 4\pi B(T)
  \]
  \[
        \xi = \left[ (\sigma^{a} - \sigma^{s}) \vec{F}^{(0)}
                + 4 \sigma^{t} \phi \hat{\Omega} \right]
                        \cdot \frac{\vec{v}}{c}
  \]
  \[
        \vec{F}^{(0)} = \vec{F} - \frac{4}{3} \phi
                                                \frac{\vec{v}}{c}
  \]

\end{note}

%-----------------------------------------------------------------------

\begin{note}

  Only P0 scattering.

  $\phi$ is the scalar intensity, and is determined \\
  from $\psi$

  Show the coupling between the equations. \\
  $\B(T_{e})$, etc.

  The source terms may be zero, or contain some or all of any
  PdV work or external energy sources.

  Mention the v/c correction terms will be in a future release.

\end{note}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P1 Approximation
  \end{center}

  Expand $\psi(\hat{\Omega})$ up to $l=1$ Legendre Moments:
  \[
       \psi = \frac{1}{4\pi} \left(
                        \phi + 3 \vec{F} \cdot \hat{\Omega}
                   \right)
  \]

  Integrate Radiation Equation Over $\hat{\Omega}$:
  \[
     \frac{1}{c} \partl{\phi}{t}
        + \del \cdot \vec{F}
        + \sigma^{a} \phi
        =  \sigma^{e} \B(T_{e})
           + \futurecolor{\langle \xi \rangle}
           + Q_{r}
  \]

  Multiply by $\hat{\Omega}$ and Integrate:
  \[
        \telegraphcolor{\frac{1}{c} \partl{\vec{F}}{t}}
        + \frac{1}{3} \del \phi
        + \sigma^{t} \vec{F}
        = \futurecolor{\langle \hat{\Omega} \xi \rangle}
  \]

\end{slide}

%-----------------------------------------------------------------------

\begin{note}
                                
  $\vec{F}$ -- angular flux, or radiation flux.

  The colored term is the difference between the P1
  and diffusion equation.

\end{note}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  The P13T Class is Templated on MT (Mesh Type), MP (Material Properties),
  and DS (Diffusion Solver)

  \begin{verbatim}
    template<class MT, class MP, class DS>
    class P13T
    {
       ...
    };
  \end{verbatim}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  \begin{center}
    Required Services \\
    (Static Functions, Member Functions, Nested Classes, Typedefs)
  \end{center}

  Required Services of MT:

    \verb#MT::ccsf# -- Cell-Centered Scalars \\
    \colorfuture
    \verb#MT::ncvf#  -- Node-Centered Vectors \normalcolor \\
    \verb#MT::fcdsf#  -- Face-Centered Scalars \\
    \verb#MT::bsbf# -- Boundary Specification

  Required Service of MP:

  \verb#template<class Field># \\
  \verb#   MaterialStateField<Field>#

\end{slide}

%-----------------------------------------------------------------------

\begin{note}

  The material state field also has services required of it,
  e.g.\ returning opacities and specific heats, etc.

  We have, under a construction, an MP with the required services.

\end{note}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  \begin{center}
    Required Services
  \end{center}

  Required Services of DS (Diffusion Solver):

  \verb#DS::FluxField# -- Fluxes at Cell Faces \\
  \verb#DS::DiscFluxField# -- Discontinuous Flux-Like \\
  \verb#DS::solve(...)# -- Solve Methods with Appropriate Signature 

\end{slide}

%-----------------------------------------------------------------------

\begin{note}

  The reason for this being defined in the diffusion solver is that
  different diffusion solvers may have different flux representations.

\end{note}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  The P13T Class Defines a Public Nested Class
  that Contains the State of the Radiation.

  \begin{verbatim}
    template<class MT, class MP, class DS>
    class P13T
    {
       struct RadiationStateField
       {
          MT::ccsf phi;
          DS::FluxField F;
          ...
       };
       ...
    };
  \end{verbatim}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  The P13T Constructor Takes a P13TOptions Instance and
  a Smart Pointer to a Diffusion Solver.

  \begin{verbatim}
    P13T(const P13TOptions &options, 
         const SP<DS> &spDiffSolver);
  \end{verbatim}

\end{slide}

%-----------------------------------------------------------------------

\begin{note}
  P13TOptions, at this time, contains flags to determine whether
  the conduction equations and/or coupled radiation equations are being
  solved for.
\end{note}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  To Solve the P1--3T Equations:

  \begin{enumerate}
    \item Create a \verb#MP::MaterialStateField<MT::ccsf># loaded with
      the cell-centered material state.
    \item Create a \verb#MP::MaterialStateField<MT::fcdsf># loaded with
      the face-centered material state.
    \item Obtain the \verb#P13T::RadiationStateField#
      containing the previous timestep's radiation\\
      state, or ask \verb#P13T# to initialize
      the radiation field.
    \newcounter{myenumi}
    \setcounter{myenumi}{\value{enumi}}
  \end{enumerate}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  To Solve the P1--3T Equations (continued):

  \begin{enumerate}
    \setcounter{enumi}{\value{myenumi}}
    \item Create a \verb#MT::bsbf# loaded with the boundary information.
    \item Create the \verb#MT::ccsf#'s loaded with material and radiation
      sources.
    \colorfuture
    \item Load a \verb#MT::ncvf# with the material velocities.
    \normalcolor
    \item Call the \verb#P13T::solve# method.
    \setcounter{myenumi}{\value{enumi}}
  \end{enumerate}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The P13T Public Class Interface
  \end{center}

  To Solve the P1--3T Equations (continued):

  \begin{enumerate}
    \setcounter{enumi}{\value{myenumi}}
    \item Use the resulting \verb#MT::ccsf#'s containing the electron
      and ion energy depositions.
    \colorfuture
    \item Use the resulting \verb#MT::ncvf# containing the momentum
      deposition.
    \normalcolor
    \item Use the resulting \verb#MT::ccsf#'s containing the new electron
      and ion temperatures.
    \item Save the resulting \verb#RadiationStateField#
      for the next time-step's calculation.
    \setcounter{myenumi}{\value{enumi}}
  \end{enumerate}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The \verb#InterpedMaterialProps# Class
  \end{center}

  The Interpolated Material Properties Class is Used by the \verb#P13T# Class
  to Calculate
  Material Properties, such as, Opacities, Specific Heats, Electron-Ion
  Coupling Coefficients, etc.

  Calculations are Based on a Bilinear Interpolation on a Temperature/Density
  Grid.

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}

  \begin{center}
    \large The \verb#InterpedMaterialProps# Class Interface
  \end{center}

  The \verb#InterpedMaterialProps# Class Defines a Public Nested Class
  that Implements the State of the Material Properties.

  \begin{verbatim}
     class InterpedMaterialProps
     {
       template<class FT>
       class MaterialStateField
       {
         ...
       };
     };
  \end{verbatim}

  The \verb#MaterialStateField# is Responsible for Returning Fields of
  Type \verb#FT# Containing the Desired Material Properties.

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}
  
  \begin{center}
    \large The \verb#InterpedMaterialProps# Class Interface
  \end{center}

  The \verb#InterpedMaterialProps#
  Constructor Takes a Material Properties Reader,
  and a List of Materials to be Extracted from the Reader.

  \begin{verbatim}
InterpedMaterialProps(vector<int> &matIds,
               MaterialPropsReader &reader)
  \end{verbatim}

  The \verb#MaterialPropsReader# Class is an Abstract Base Class from which
  Specific Readers are Derived.

  One Such Class is the \verb#FifiMatPropsReader# Class, Used to Read
  Fifi Generated Text Files.

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}
  
  \begin{center}
    \large The \verb#InterpedMaterialProps# Class Interface
  \end{center}

  A \verb#MaterialStateField# is Extracted from an
  Instantiated \verb#InterpedMaterialProps# Using the \\
  \verb#getMaterialState# Method:

  \begin{verbatim}

template<class FT, class FT2>
MaterialStateField<FT>
     getMaterialState(const FT &density,
                      const FT &electronTemp,
                      const FT &ionTemp,
                      const FT2 &matId) const
  \end{verbatim}

\end{slide}

%-----------------------------------------------------------------------

\begin{slide}
  
  \begin{center}
    \large The \verb#InterpedMaterialProps# Class Interface
  \end{center}

  An Example of the \verb#getMaterialState# in Use Within \verb#P13T#:

  \begin{verbatim}
    MT::ccsf sigmaAbs(spMesh);
    matStateCC.getSigmaAbsorption(groupNo,
                                  sigmaAbs);
  \end{verbatim}

  Where \verb#spMesh# is a Smart Pointer to an \verb#MT#,
  \verb#groupNo# is an Integer (Set to 1 for \verb#P13T#),
  and \verb#matStateCC# is a Passed In Field of Type: \\
  \verb#MP::MaterialStateField<MT::ccsf>#

\end{slide}

%-----------------------------------------------------------------------

\end{document}
