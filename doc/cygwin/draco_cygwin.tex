%%---------------------------------------------------------------------------%%
%% draco_cygwin.tex
%% Kelly Thompson
%% 11 December 2003
%% $Id$
%%---------------------------------------------------------------------------%%
%%
%% This memo describes how to get draco running under a Cygwin environment.
%%
%%---------------------------------------------------------------------------%%
\documentclass[11pt]{nmemo}
\usepackage[centertags]{amsmath}
\usepackage{amssymb,amsthm,graphicx}
\usepackage[mathcal]{euscript}
\usepackage{tmadd,tmath}
\usepackage{cite}

%----------------------------------------------------------------------
% Use underline for emphasis. (\emph{text} or \em commands)
%
% This package can be turned and off by using the commands:
% \normalem and \ULforem
%
% \uline{text} - underline
% \uwave{text} - underwave
% \sout{text}  - strike-out
% \xout{text}  - cross out
\usepackage{ulem} 
\normalem
%----------------------------------------------------------------------

\usepackage{url}
\def\UrlFont{\footnotesize\tt}

\usepackage{times} % better fonts for PDF

%%---------------------------------------------------------------------------%%
%% DEFINE SPECIFIC ENVIRONMENTS HERE
%%---------------------------------------------------------------------------%%
%\newcommand{\elfit}{\ensuremath{\operatorname{Im}(-1/\epsilon(\vq,\omega)}}
%\msection{}-->section commands
%\tradem{}  -->add TM subscript to entry
%\ucatm{}   -->add trademark footnote about entry
\newcommand{\comp}[1]{\normalfont\footnotesize\texttt{#1}\normalsize}
\newcommand{\draco}{{\normalfont\sffamily Draco}}
\newcommand{\metis}{{\normalfont\sffamily Metis}}
\newcommand{\pcg}{{\normalfont\sffamily PCG}}
\newcommand{\cvs}{{\normalfont\bfseries CVS}}
\newcommand{\python}{{\normalfont\bfseries Python}}
\newcommand{\doxygen}{{\normalfont\bfseries Doxygen}}
\newcommand{\kcc}{{\normalfont\bfseries KCC}}
\newcommand{\xemacs}{{\normalfont\bfseries XEmacs}}
\newcommand{\cygwin}{{\normalfont\bfseries Cygwin}}
\newcommand{\bash}{{\normalfont\bfseries Bash}}
\newcommand{\bugz}{{\normalfont\sffamily Bugzilla}}

%%---------------------------------------------------------------------------%%
%% BEGIN DOCUMENT
%%---------------------------------------------------------------------------%%

\begin{document}

%%---------------------------------------------------------------------------%%
%% OPTIONS FOR NOTE
%%---------------------------------------------------------------------------%%

\toms{Distribution}
%\toms{Joe Sixpak/CCS-4, MS B226}
\refno{CCS-4:03-XX(U)}
\subject{Setting up Cygwin for Draco Development}

%-------NO CHANGES
\divisionname{Computer and Computational Sciences}
\groupname{CCS-4:Transport Methods Group}
\fromms{Kelly Thompson/CCS-4, MS D409}
\phone{(505)665--3929}
\originator{kgt}
\typist{kgt}
\date{\today}
%-------NO CHANGES

%-------OPTIONS
%\reference{NPB Star Reimbursable Project}
%\thru{P. D. Soran, XTM, MS B226}
%\enc{list}      
%\attachments{list}
%\cy{list}
%\encas
%\attachmentas
%\attachmentsas 
%-------OPTIONS

%%---------------------------------------------------------------------------%%
%% DISTRIBUTION LIST
%%---------------------------------------------------------------------------%%

\distribution {
  Adams, Benjamin T., CCS--4, MS T006 \\
  Batcho, Paul F., CCS--4, MS D409 \\
  Budge, Kent G., CCS--4, MS D409 \\ 
  Buksas, Michael W. (Mike), CCS--4, MS D409 \\
  Carrington, David B., CCS--4, MS D409 \\ 
  Dahl, Jon A., CCS--4, MS D409 \\
  Densmore, Jeffery D., CCS--4, MS D409 \\
  Evans, Thomas M., CCS--4, MS D409 \\
  Gonzalez-Aller, Alejandro, CCS--4, MS T006 \\
  Lowrie, Robert B., CCS--2, MS D413 \\
  Thompson, Kelly G. (K T), CCS--4, MS D409 \\
  Turner, John Alexander, CCS--2, MS D413 \\
  Turner, Scott A., CCS--4, MS D409 \\
  Urbatsch, Todd J., CCS--4, MS D409 \\
  Warsa, James S., CCS--4, MS D409 \\
}

%%---------------------------------------------------------------------------%%
%% BEGIN VISION STATEMENT
%%---------------------------------------------------------------------------%%

\opening

\section*{Introduction}

This memo is designed to outline the process by which \draco can be
installed onto a \cygwin\ environment.  Details are provided for
obtaining and installing \cygwin\ and \xemacs\ onto a Windows operating
system.  The \cygwin\ environment must be customized a bit to be fully
compatible for \draco\ development.  Additionally, this memo desribes
how to install vendor components requried by \draco\ .  These vendors
include mpich, sprng, atlas, and pcg.  Once these vendors are
installed, configuring, compiling and testing \draco\ can be executed in
the same fasion that is used for a typical Unix machine.

%%---------------------------------------------------------------------------%%

\section*{Obtaining and Installing Cygwin}

The \cygwin\ tools are ports of the popular GNU development tools and
utilities for Windows NT and 9x. They function through the use of the
\cygwin\ library which provides the UNIX system calls and environment
that these programs require.

With the tools installed, programmers may write Win32 console or GUI
applications that make use of the standard Microsoft Win32 API and/or
the \cygwin\ API. As a result, it is possible to easily port many
significant UNIX programs without the need for extensive changes to
the source code. This includes configuring and building most of the
available GNU software (including the development tools included with
the \cygwin\ distributions). Even if the compiler tools are of little
to no use to you, you may have interest in the many standard UNIX
utilities. They can be used both from the bash shell (provided) or
from the command.com.

\subsection*{Obtaining Cygwin}

The \cygwin homepage is located at \url{http://www.cygwin.com}.  You
will need to download and run the setup tool that is located on the
\cygwin\ homepage.  It is suggested that you save this script at
\url{c:\cygwin\setup\} before running it.

When the \cygwin\ setup script is run it will obtain, install and
configure all of the basic \cygwin\ components for you.  This script
can be run at a later date to update your \cygwin\ components.

\subsection*{Installing Cygwin}

Run the \cygwin\ \url{setup.exe} script.  When prompted you should set
the root directory to \url{c:\cygwin\} and select Unix as the files
system type.  I recommend that you set the local package directory
to \url{c:\cygwin\setup\}.  The files can be downloaded from any
  suitably fast download site.  I used
  \url{http://mirror.mcs.anl.gov}. 

Choose to install everything when prompted for which packages to
install.  You can reduce download time by deselecting items that you
do not need (database tools, web tools, etc.).  It may take up to an
hour to download and install all of the componenets.  

\subsection*{Configuring Cygwin}

The default setup provides a basic work environment.  However, there
are a few modifications that can be done to improve the the \cygwin\
environment.  

\subsubsection*{Use rxvt}

The default terminal for \cygwin\ is bash running under the NT command
shell.  rxvt is a much better terminal is also available under
\cygwin\ and I recommend that you setup a Windows shortcut to point to
it.  Create a short cut that has the following target:

\footnotesize
\begin{verbatim}
C:\cygwin\bin\rxvt.exe -e c:\cygwin\bin\ssh-agent c:\cygwin\bin\bash --login -i
\end{verbatim}
\normalsize

%C:\cygwin\bin\rxvt.exe -geometry 80x50 -bg ivory -sl 2000 -tn color-xterm -cr red -title Starburst -e c:\cygwin\bin\ssh-agent c:\cygwin\bin\bash --login -i

This command will start an rxvt terminal that is running bash under an
ssh-agent.  Once your ssh-keys are setup you will be able to connect
to the \draco repository or the SorceForger repository without using a
password.

Other command line options for rxvt can be found by running ``man
rxvt''.  Some setup details are provided at
\url{/usr/doc/Cygwin/rxvt-2.7.10.README}. 

\subsubsection{User Environment}

The Windows environment should be modified to provide a few system
variables to \cygwin.  The windows environment is managed differently
for different versions of Windows.  If you are running Windows XP or
2000 the environment manager can be accessed by right clicking on
\emph{My Computer} and selecting \emph{Properties}.  Next select the
\emph{Advanced} tab an then the \emph{Environment Variables} button.
It is recommended that you only modify the User Variables and not the
System Variables.

The following variables should be set:

\footnotesize
\begin{verbatim}
CYGWIN = ntsec tty
HOME = /home/<username>
SHELL = /bin/bash
USER = <username>
\end{verbatim}
\normalsize

In this list you should replace \url{<username>} with your Unix user
name.  You should also augment the \url{PATH} environment variable by
added \url{c:\cygwin\usr\bin\}.  You may need to restart Windows for these
  changes to take effect.

\subsubsection{Bash settings}

You can now configure your bash environment just as you would on a
Linux machine by modfying \comp{.bashrc}, \comp{.bash\_profile},
\comp{.Xdefaults} and \comp{.inputrc}.  Additionally, you should setup
your ssh-keys and authorized\_keys files.  Basically, setup your Unix
environment to your liking.

%%---------------------------------------------------------------------------%%

%\newpage
\section*{Obtaining and Installing XEmacs}

\xemacs\ is a highly customizable open source text editor and
application development system. It is protected under the GNU Public
License and related to other versions of Emacs, in particular GNU
Emacs. Its emphasis is on modern graphical user interface support and
an open software development model, similar to Linux. \xemacs\ has an
active development community numbering in the hundreds, and runs on
Windows 95 and NT, Linux and nearly every other version of Unix in
existence. Support for \xemacs\ has been supplied by Sun Microsystems,
University of Illinois, Lucid, ETL/Electrotechnical Laboratory, Amdahl
Corporation, BeOpen, and others, as well as the unpaid time of a great
number of individual developers.  The \xemacs\ homepage is located at
\url{http://xemacs.org}. 

\subsection*{Obtaining XEmacs}

There is a version of \xemacs\ specifically for \cygwin.  You should
visit the \xemacs\ download webpage
(\url{http://xemacs.org/Download/}) and download the Windows
\emph{Netinstaller}.  This setup script should be saved on your local
hard disk so that it can be invoked to update \xemacs in the future.
It is recommended that you save the setup script at
\url{c:\cygwin\usr\local\xemacs\setup\}.  

\subsection*{Installing XEmacs}

Run the setup script that you saved in the previous step.  Ensure that
all packages are selected that you are setting up \xemacs\ for
\cygwin.  It is recommended that you override the default install
location with \url{c:\cygwin\usr\local\xemacs}.  Next, select one of
the download sites.  I used \url{ftp.xemacs.org}.  Downloading and
installing \xemacs\ can take up to an hour because the download sites
typically are low bandwith connections.

\subsection*{Configuring XEmacs}
 
There is no special setup required to use \xemacs.  I recommend that
you create a symbolic link in \comp{/usr/bin} or \comp{/usr/local/bin}
that points to the installed \xemacs\ binary.

You probably have some personalized \xemacs\ scripts that can be
installed at \url{~\.xemacs}.  

%%---------------------------------------------------------------------------%%

%\newpage
\section*{sshd for Cygwin}

The ssh daemon is not turned on by default in Cygwin.  sshd must be
configured and turned on in Windows so that mpich can function
correctly.  This section will outline the process for getting sshd
running under Windows.  A more complete description can be found at
\url{http://tech.erdelynet.com/cygwin.html}. 

\subsection*{sshd setup}

%%---------------------------------------------------------------------------%%

%\newpage
\section*{mpich for Cygwin}

\begin{enumerate}
\item Download and install mpich for NT.
\item Use the Windows version for this download.
\item Install and verify that service is working.
\item Copy the gcc install files to /cygwin/usr/local/mpich.
\end{enumerate}

%%---------------------------------------------------------------------------%%

%\newpage
\section*{SPRNG}

\begin{enumerate}
\item Download and install SPRNG
\end{enumerate}

%%---------------------------------------------------------------------------%%

%\newpage
\section*{Draco Elisp}

\begin{enumerate}
\item CVS checkout for elisp.
\end{enumerate}

%%---------------------------------------------------------------------------%%

\closing
\end{document}

%%---------------------------------------------------------------------------%%
%% end of draco_cygwin.tex
%%---------------------------------------------------------------------------%%

