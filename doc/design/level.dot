digraph draco_level {
    /* graph attributes */
    center=1;
    size="7.5,10";
    ranksep=4;
    
    /* levels */
    level1 [shape=plaintext, label="Level 1:", fontsize=18];
    level2 [shape=plaintext, label="Level 2:", fontsize=18];
    level3 [shape=plaintext, label="Level 3:", fontsize=18];
    level4 [shape=plaintext, label="Level 4:", fontsize=18];
    level5 [shape=plaintext, label="Level 5:", fontsize=18];
    
    level5 -> level4 -> level3 -> level2 -> level1 [style=invis];
    
    /* packages */

    /* level 1 */
    stdheaders [shape=box,     color=brown, label="stdheaders\n(Only when C++ compiler does not\nfully support C++ standard header files.)"];
    vmpi       [shape=hexagon, color=green, label="MPI"];
    vlapack    [shape=hexagon, color=green, label="LAPACK"];
    vpcg       [shape=hexagon, color=green, label="PCG"];
    vgandolf   [shape=hexagon, color=green, label="GANDOLF"];
    veospac    [shape=hexagon, color=green, label="EOSPAC"];
    vgrace     [shape=hexagon, color=green, label="XMGRACE"];
    vspring    [shape=hexagon, color=green, label="SPRING"];
        
    /* level 2 */
    dsxx [shape=box, label="ds++", width=6];
    
    /* level 3 */
    traits [shape=box, label="traits"];
    xm [shape=box, label="xm"];
    c4 [shape=box, label="c4"];
    rng [shape=box, label="rng"];
    units [shape=box, label="units"];
    cdi [shape=box, label="cdi"];
    quad [shape=box, label="quadrature"];
    meshread [shape=box, label="meshReaders"];
    plot [shape=box, label="plot2D"];
    lapack [shape=box, label="lapack_wrap"];
    
    /* level 4 */
    viz [shape=box, label="viz"];
    timestep [shape=box, label="timestep"];
    cdianal [shape=box, label="cdi_analytic"];
    cdieos [shape=box, label="cdi_eospac"];
    cdigan [shape=box, label="cdi_gandolf"];
    pcg [shape=box, label="pcgWrap"];
    rttread [shape=box, label="RTT_Format_Reader"];
    
    /* level 5 */
    meshservice [shape=box, label="meshReaders_Services"];
    
    /* dependencies */
    {rank=same; level1 stdheaders vlapack vpcg vmpi veospac  vgandolf vgrace vspring};
    {rank=same; level2 dsxx};
    {rank=same; level3 plot lapack traits xm c4 rng units meshread cdi quad};
    {rank=same; level4 rttread viz timestep cdianal cdieos cdigan pcg};
    {rank=same; level5 meshservice};
    
    /* draco packages */

    /* NOTE:  hidden dependencies are in comments at the end of each line.
     * For example if a package depends on c4 it implicitly depends on dsxx
     * as well.  The dependency on dsxx is not shown explicitly on the
     * graph. 
    
    /* level 2 */
    dsxx -> {stdheaders}   [color="brown" style=dotted];
    
    /* level 3 */
    xm          -> {dsxx};
    units       -> {dsxx};
    traits      -> {dsxx};
    c4          -> {dsxx};
    c4          -> {vmpi}    [color="green"];
    rng         -> {dsxx};
    rng         -> {vspring} [color="green"];
    cdi         -> {dsxx};
    meshread    -> {dsxx};
    quad        -> {dsxx};
    plot        -> {dsxx};
    plot        -> {vgrace}  [color="green"];
    lapack      -> {dsxx};
    lapack      -> {vlapack} [color="green"];
    
    /* level 4 */
    viz         -> {traits};      /* traits: dsxx */
    timestep    -> {c4};          /* c4      : dsxx */
    pcg         -> {dsxx};
    pcg         -> {vlapack vpcg} [color="green"];
    pcg         -> {c4}           [color="orange" style=dotted];
    cdianal     -> {cdi};         /* cdi     : dsxx */
    cdieos      -> {cdi};         /* cdi     : dsxx */
    cdieos      -> {veospac}      [color="green"]; 
    cdigan      -> {cdi};         /* cdi     : dsxx */
    cdigan      -> {vgandolf}     [color="green"];
    rttread     -> {meshread};    /* meshread: dsxx */

    /* level 5 */
    meshservice -> {meshread};           /* meshread: dsxx */
    meshservice -> {rttread} [color="orange" style=dotted];
}
