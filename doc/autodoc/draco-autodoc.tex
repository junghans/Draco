%%---------------------------------------------------------------------------%%
%% draco-autodoc.tex
%% John McGhee
%% Time-stamp: <99/08/06 08:45:09 mcghee>
%%---------------------------------------------------------------------------%%
\documentclass[11pt]{nmemo}
\usepackage[centertags]{amsmath}
\usepackage{amssymb,amsthm,graphicx}
\usepackage[mathcal]{euscript}
\usepackage{tmadd,tmath}
\usepackage{cite}

%%---------------------------------------------------------------------------%%
%% DEFINE SPECIFIC ENVIRONMENTS HERE
%%---------------------------------------------------------------------------%%
%\newcommand{\elfit}{\ensuremath{\operatorname{Im}(-1/\epsilon(\vq,\omega)}}
%\msection{}-->section commands
%\tradem{}  -->add TM subscript to entry
%\ucatm{}   -->add trademark footnote about entry

\newcommand{\draco}{{\normalfont\sffamily Draco}}
\newcommand{\xemacs}{{\normalfont\bfseries XEmacs}}
\newcommand{\gnats}{{\normalfont\bfseries GNATS}}
\newcommand{\doxy}{{\normalfont\bfseries Doxygen}}
%%---------------------------------------------------------------------------%%
%% BEGIN DOCUMENT
%%---------------------------------------------------------------------------%%
\begin{document}

%%---------------------------------------------------------------------------%%
%% OPTIONS FOR NOTE
%%---------------------------------------------------------------------------%%

\toms{Distribution}
%\toms{Joe Sixpak/X--TM, MS D409}
\refno{XTM:JMM-99-??? (U)}
\subject{\doxy\ C++ Automatic Documentation Utility}

%-------NO CHANGES
\divisionname{Applied Theoretical \& Computational Physics Div.}
\groupname{X--TM:Transport Methods Group}
\fromms{John M. McGhee/X--TM, MS D409}
\phone{(505)667--9552}
\originator{jmm}
\typist{jmm}
\date{\today}
%-------NO CHANGES

%-------OPTIONS
%\reference{NPB Star Reimbursable Project}
%\thru{P. D. Soran, XTM, MS B226}
%\enc{list}      
%\attachments{list}
%\cy{list}
%\encas
%\attachmentas
%\attachmentsas 
%-------OPTIONS

%%---------------------------------------------------------------------------%%
%% DISTRIBUTION LIST
%%---------------------------------------------------------------------------%%

\distribution {
J.E. Morel, XTM MS D409\\ 
J.M. McGhee, XTM MS D409\\ 
H.G. Hughes, XTM MS D409\\ 
T.M. Evans, XTM MS D409\\ 
M.G. Gray, XTM MS D409\\ 
S.D. Pautz, XTM MS D409\\ 
R.M. Roberts, XTM MS D409\\ 
T.J. Urbatsch, XTM MS D409\\ 
T.A. Wareing, XTM MS D409\\ 
J.S. Warsa, XTM MS D409\\ 
C.J. Gesh, XTM MS D409\\ 
R.B. Lowrie, XHM MS D413\\ 
W.D. Hawkins, XTM MS D409}


%%---------------------------------------------------------------------------%%
%% BEGIN NOTE
%%---------------------------------------------------------------------------%%

\opening

The GNU Public License C++ automatic code documentation system \doxy\
has been installed
for use by the \draco\ team. This memo describes how to
set up and use \doxy\ .  Also, some suggestions are made as to minimal
documentation standards.

\section{Introduction}

\doxy\ is an automatic C++ code documentation system available under
the GNU Public License. 
 A user's manual and other information is available on-line at:
\begin{verbatim} http://www.stack.nl/~dimitri/doxygen/ \end{verbatim}

Good documentation is critical to any code development effort.
The advantages of automatic documentation systems are many. 
For example, the documentation  and the code are much more likely to
be conformal; the documentation is conveniently located with the code,
code developers are encouraged to include liberal explanations in their 
comments, and updates and corrections are easily handled.
\draco\ has been considering adopting such a system for some time.


Recently, Tom Evans has evaluated several automatic documentation systems
including DOC++, PERCEPS, KDOC, and \doxy\ . 
For \draco\ automatic documentation purposes, \doxy\ is deemed to be clearly the 
package of choice. There are several reasons for this. Among these are
ease of use and installation; a plethora of clever and useful features;
good documentation (the package documented itself!);
active development and support from a responsive author; and 
minimal overhead requirements on the code developer.


This evaluation is based on direct experience using \doxy\ to document
two existing \draco\ packages.
Tom has documented the rng package and I have documented the timestep
package.
Let me emphasize that this is an easy and painless way to document your
code. Tom and I have both found the process addictive, the more comments
you put in, the more you want to put in. \doxy\ can be used on any
C++ source file without any modifications to the source at all. However,
we would encourage all \draco\
developers to take the small amount of time required to retrofit their
 existing code
to take advantage of the special features that \doxy\ offers. 
Also, we recommend that all new code developed in \draco\ make use
of \doxy\ capabilites.

\section{How to use \doxy\ }

\subsection{Overview}
\doxy\ uses a few simple special comment characters to extract code
documentation directly from the source code. The only additional burden
on the code author is to remember and occasionally use a dozen or so
simple comments. After the source code is commented, both html (with links)
and \LaTeX\ output is automatically produced directly from the source code.
Example code can be included verbatim. If desired, both  html tags, and \LaTeX\
formulas can be included directly in the source code comments. In addition,
\doxy\ groks C++ and extracts considerable information from the *.hh
file, even if the developer does not include any comments at all.

\subsection{Usage}
\doxy\ requires a configuration file to set certain parameters. This should
be copied from the \draco\ templates directory to the package directory. 
Some customization will
be required for each package, mainly package name and version. The
config file is well commented and self explanatory. Once the config file
is in place, log on to any SGI platform and simply type:\begin{verbatim}
 /scratch/tme/bin/doxygen config_filename
\end{verbatim}
A html and \LaTeX\ directory will be produced with your documentation 
inside.

\subsection{Special Comment Blocks}

The fundamental key that \doxy\ uses to flag a block of comments for
extraction is the C-style comment character followed by an exclamation
point. For example:\begin{verbatim}

/*!
 *
 * This text (without the asterisks) will appear in the documentation!
 *
 */

\end{verbatim}

This is all that is required from the code developer to get everything
in the comment block into the documentation. \doxy\ automatically associates
the comment block with the class/member that immediately follows the 
comment block in the source. Alternatively, you can put the comment block
anywhere in any file and mark it with a special keyword to associate it
with the appropriate class/member. Blank lines are recognized as paragraph
breaks. Code comments in other legal C++ comment formats are ignored.

\subsection{A Few Major Keywords}

Inside a \doxy\ comment block, there are currently approximately 60 special
keywords that \doxy\ recognizes. If desired, these keywords can be used to 
control and produce addtional features in the documentation. 
 The interested reader is referred to the \doxy\
manual for details on these keywords. 
We will briefly describe the major keywords that we have
found to be most useful. 

\begin{description}
\item [file] The file name
\item [author] The author
\item [date] The date
\item [brief] A one line description
\item [param] An input parameter
\item [return] The return value
\item [sa] ``See Also'' a list of related items
\item [example {\em filename}] Includes {\em filename} as a code example.
\item [include {\em filename}] Includes {\em filename} verbatim at the point of
  reference
\item [page] Places the comment block in which it appears in the documentation
as a separate page 
\end{description}


\section{\draco\ Installation Strategy}
  \subsection{New Templates}
  Tom Evans is installing new *.cc and *.hh templates in the \draco\ elisp
directory to support \doxy\ requirements. There will also be a
template for a standard \doxy\ configuration file, and standard header
and footer files for \doxy\ html output.
  
\subsection{Tag Files}
Tag files are used to refer to other packages. Relative Paths are supported.

  \subsection{Storage of \doxy\ Output}
Each package developer will run \doxy\ in it's respective directory. 
\doxy\ will create html and \LaTeX\ sub-directories to contain the
html and \LaTeX\ documentation output. \doxy\ will need to be
run periodically to bring the documentation into sync with with the
source code. The resulting output should be tagged and committed to
CVS using the same procedures as for the source code.

  \subsection{\draco\ WWW Site}
When checking out the \draco\ web site,
CVS magic will be used to check out the appropriate html source
from each package directory in \draco\.

\section{Documentation Standards}

We believe that each developer should be free to document source code
in the style and manner most agreeable to the individual. As such,
only minimal documentation standards are required.
We propose the following standards for consideration:

\begin{itemize}
\item Each file, namespace, class,  and associated public members should have 
a least a brief description.
\item Each public member should have descriptions of its input parameters and
return values.
\end{itemize}

We feel that these guidelines, together with what \doxy\ will automatically
extract, will produce documentation that is adequate for our purposes. Of
course, all developers are free and encouraged to provide more than the
minimum.

\section{Example}
Nothing is as instructive as a good example, so here is a copy of
one of the header files from the timestep utility. Of course,
there is more than one way to accomplish this, but this is one way.


\begin{verbatim}
//----------------------------------*-C++-*----------------------------------//
/*! 
 * \file fixed_ts_advisor.hh
 * \brief Defines the fixed time-step advisor.
 *
 * \author <a href="http://www.lanl.gov/home/mcghee">
 *  John McGhee</a>
 *
 * \date Thu Apr  2 14:06:18 1998
 */
//---------------------------------------------------------------------------//

#ifndef __timestep_fixed_ts_advisor_hh__
#define __timestep_fixed_ts_advisor_hh__

#include "ts_advisor.hh"

namespace rtt_timestep {

//===========================================================================//
/*!
 * \brief Introduces a user defined fixed value 
 *        into the time-step calculation.
 *
 * \sa The ts_manager class provides a means to manage this advisor.
 * The \ref overview page gives a summary of the Draco time step control
 * utilities. 
 *
 * This is useful to set min and max timesteps, or to force a
 * timestep, etc. The recommendation for the new timestep is
 * simply the user input value. 
 */ 
//===========================================================================//
class fixed_ts_advisor : public ts_advisor {

  // DATA

  private:
    /*!
     * \brief Value used to oompute a fixed advisor recommended timestep.
     */
    double fixed_value; 
   
// CREATORS

  public:

    /*!
     * \brief Constructs a fixed time-step advisor.
     * \param name_ A unique name for the advisor.
     * \param usage_ How the advisor is to be used.
     * \param const_value_ The desired value for the timestep.
     * \param active_ Turns the advisor on/off.
     */
    fixed_ts_advisor( 
        const std::string &name_  = std::string("Unlabeled"),
        const usage_flag usage_ = max, 
        const double const_value_ = large(),
        const bool active_ = true);

    /*!
     * \brief Destroys a fixed time-step advisor.
     */
    ~fixed_ts_advisor();

// MANIPULATORS
    
    /*!
     * \brief Sets the fixed value.
     * \param value_ The fixed value.
     */
    void set_fixed_value(const double value_ = large())
    { 
        fixed_value = value_;
    }

// ACCESSORS

    /*!
     * \brief Returns the time-step recommended by a fixed  advisor.
     * \param tsm The time step manager in which the advisor resides.
     * \return The recommended timestep.
     */
    double get_dt_rec(const ts_manager &tsm) const;
    
    /*! 
      \brief Prints the state of a fixed advisor.
      \return Prints the internal state of the advisor to std out.
     */
    void print_state() const;
    
    /*! 
      \brief Fixed advisor invariant function.
      \return True if the invariant is satisfied.
     */
    bool invariant_satisfied() const;

};

} // end of rtt_timestep namespace

#endif                          // __timestep_fixed_ts_advisor_hh__

//---------------------------------------------------------------------------//
//                              end of fixed_ts_advisor.hh
//---------------------------------------------------------------------------//

\end{verbatim}

\closing
\end{document}

%%---------------------------------------------------------------------------%%
%% end of draco-autodoc.tex
%%---------------------------------------------------------------------------%%
