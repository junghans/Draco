<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.1p1 release (March 2nd, 1998)
originally by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Adaptors</TITLE>
<META NAME="description" CONTENT="Adaptors">
<META NAME="keywords" CONTENT="cip">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="cip.css">
<LINK REL="next" HREF="node7.html">
<LINK REL="previous" HREF="node5.html">
<LINK REL="up" HREF="cip.html">
<LINK REL="next" HREF="node7.html">
</HEAD>
<BODY >

<A NAME="tex2html80"
 HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html78"
 HREF="cip.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html72"
 HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>   <BR>
<B> Next:</B> <A NAME="tex2html81"
 HREF="node7.html">Evaluation</A>
<B>Up:</B> <A NAME="tex2html79"
 HREF="cip.html">Container-Free Numerical Algorithms in</A>
<B> Previous:</B> <A NAME="tex2html73"
 HREF="node5.html">Refinement</A>
<BR> <P>

<!--End of Navigation Panel-->

<H1><A NAME="SECTION00060000000000000000">
Adaptors</A>
</H1>

<P>
We have just one more topic to discuss.  What if you have a container
which actually doesn't provide the required services?  For example,
what if you have an <TT>std::vector&lt;double&gt;</TT>?  The <TT>std::vector&lt;T&gt;</TT> class has <TT>operator[](int)</TT> methods (<TT>const</TT>
and non <TT>const</TT> versions) but not <TT>operator()(int)</TT> methods.
Or what if your container actually has no direct way to answer
questions about how big it is?  For example, if you actually have a
<TT>double **</TT>, this ``container'' has no internal state, and there
is actually no way to answer the ``<TT>begin_row_index</TT>'' question
just by looking at the <TT>double **</TT> ``container''.  How do you cope
with these sorts of situations?  In particular, no acceptable answer
can involve copying the data from the starting container into some
other container which does supply the needed services, since this is
wasteful of both CPU and memory as well as being aesthetically
offensive. 

<P>
Once again, we are led by the STL.  One can build an ``adaptor''--a
class which presents the desired public interface (provides desired
services) implemented in terms of the original class.  For example,
Figure&nbsp;<A HREF="node6.html#vwrap">7</A> presents an adaptor which wraps an <TT>std::vector</TT> so that it provides an <TT>operator()(int)</TT>.  Note that
this is a very lightweight class.  Its only member datum is a
reference to an <TT>std::vector</TT>, so the cost of instantiating such
an adaptor is negligible both in space and time.

<P>
<BR>
<DIV ALIGN="CENTER"><A NAME="vwrap">&#160;</A><A NAME="662">&#160;</A>
<TABLE WIDTH="50%">
<CAPTION><STRONG>Figure 7:</STRONG>
Wrapping an std::vector so that it presents a suitable public interface.</CAPTION>
<TR><TD><IMG
 WIDTH="678" HEIGHT="410"
 SRC="img8.gif"
 ALT="\begin{figure}\begin{tex2html_preform}\begin{verbatim}// vwrap.hh
// An adaptor ...
...int n) const { return v[n]; }
};\end{verbatim}\end{tex2html_preform}\end{figure}"></TD></TR>
</TABLE>
</DIV>
<BR>
<P>
For completeness, Figure&nbsp;<A HREF="node6.html#carraywrap">8</A> presents an adaptor which
wraps a C style array.  This example is a little more complicated
since you have to store some state data in the adaptor which will be
needed in order to implement the methods that will be called by the
<TT>cip_traits</TT> forwarding methods.  The point here is just that <EM>there is a way</EM> to do this which allows you to utilize a suitably
constructed generic algorithm library, no matter how your data is
stored.  

<P>
<BR>
<DIV ALIGN="CENTER"><A NAME="carraywrap">&#160;</A><A NAME="681">&#160;</A>
<TABLE WIDTH="50%">
<CAPTION><STRONG>Figure 8:</STRONG>
Wrapping a C style array so that it presents a suitable public interface.</CAPTION>
<TR><TD><IMG
 WIDTH="618" HEIGHT="548"
 SRC="img9.gif"
 ALT="\begin{figure}\begin{tex2html_preform}\begin{verbatim}// carraywrap.hh
// An ada...
... { return n_rows; }
// etc...
};\end{verbatim}\end{tex2html_preform}\end{figure}"></TD></TR>
</TABLE>
</DIV>
<BR>
<P>
<HR>
<A NAME="tex2html80"
 HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html78"
 HREF="cip.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html72"
 HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>   <BR>
<B> Next:</B> <A NAME="tex2html81"
 HREF="node7.html">Evaluation</A>
<B>Up:</B> <A NAME="tex2html79"
 HREF="cip.html">Container-Free Numerical Algorithms in</A>
<B> Previous:</B> <A NAME="tex2html73"
 HREF="node5.html">Refinement</A>

<!--End of Navigation Panel-->
<ADDRESS>
<I>Mark Gray <BR>
1998-05-20</I>
</ADDRESS>
</BODY>
</HTML>
